<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Siana 语文字转换器</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" type="text/css" href="/styles/style.css">
    <link rel="stylesheet" type="text/css" href="/styles/header-style.css">
    <style>
        @font-face {
            font-family: 'Roboto Siana';
            src: url('RobotoSiana-Regular.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        body {
            font-family: 'Roboto Siana', system-ui, -apple-system, BlinkMacSystemFont,
                "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        .output-text {
            font-family: 'Roboto Siana', system-ui, -apple-system, BlinkMacSystemFont,
                "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            word-wrap: break-word;
        }
    </style>
</head>

<body>
    <header class="site-header">
        <div class="container">
            <div class="logo-container">
                <a href="/">
                    <img class="logo" src="/icons/xs-white.svg" alt="XS" width="50" height="50">
                </a>
                <h1 class="logo">XS's Website</h1>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="/">主页</a></li>
                    <li><a href="/files">文件</a></li>
                    <li><a href="/blogs">博客</a></li>
                    <li><a href="/tools">工具</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container">
        <h1>Siana 语文字转换器</h1>

        <div>
            <p>
                此工具将 Siana 语拉丁字母转换为 Siana 字母。
            </p>
        </div>

        <div>
            <label for="inputText">输入文本:</label>
            <textarea id="inputText"></textarea>
        </div>

        <div class="result-container">
            <label for="outputText">转换结果:</label>
            <textarea id="outputText" class="output-text" readonly></textarea>
            <button id="copyBtn" class="copy-btn">复制结果</button>
        </div>
    </div>

    <footer class="site-footer">
        <div class="container">
            <p>
                &copy; 2025 Ricky Zhang. Unless otherwise stated, the content of this page is licensed under <a
                    href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a><img
                    src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" alt=""
                    style="max-width: 1em;max-height:1em;margin-left: .2em;"><img
                    src="https://mirrors.creativecommons.org/presskit/icons/by.svg" alt=""
                    style="max-width: 1em;max-height:1em;margin-left: .2em;">
                <br>
                除非另有说明，本网页的内容适用 CC-BY 4.0 协议。
            </p>
            <ul class="social-links">
                <li><a href="https://github.com/19ty84/ricky-zhang.github.io">GitHub</a></li>
                <li><a href="https://space.bilibili.com/519009329">Bilibili</a></li>
                <li><a href="https://x.com/XSsMC_Ricky">Twitter</a></li>
                <li><a href="mailto:2647748131@qq.com">Email</a></li>
            </ul>
        </div>
    </footer>

    <script>
        // 映射表（直接来自用户提供的数据）
        const mapping = {
            "OE": "U+F0217",
            "Oe": "U+F0217",
            "OI": "U+F0218",
            "Oi": "U+F0218",
            "oe": "U+F0237",
            "oi": "U+F0238",
            "A": "U+F0200",
            "B": "U+F0201",
            "G": "U+F0202",
            "D": "U+F0203",
            "H": "U+F0204",
            "U": "U+F0205",
            "Z": "U+F0206",
            "E": "U+F0207",
            "C": "U+F0208",
            "I": "U+F0209",
            "K": "U+F020A",
            "M": "U+F020B",
            "N": "U+F020C",
            "S": "U+F020D",
            "O": "U+F020E",
            "P": "U+F020F",
            "R": "U+F0210",
            "J": "U+F0211",
            "T": "U+F0212",
            "F": "U+F0213",
            "V": "U+F0214",
            "L": "U+F0215",
            "X": "U+F0216",
            "W": "U+F0219",
            "Q": "U+F021A",
            "Y": "U+F021B",
            "a": "U+F0220",
            "b": "U+F0221",
            "g": "U+F0222",
            "d": "U+F0223",
            "h": "U+F0224",
            "u": "U+F0225",
            "z": "U+F0226",
            "e": "U+F0227",
            "c": "U+F0228",
            "i": "U+F0229",
            "k": "U+F022A",
            "m": "U+F022B",
            "n": "U+F022C",
            "s": "U+F022D",
            "o": "U+F022E",
            "p": "U+F022F",
            "r": "U+F0230",
            "j": "U+F0231",
            "t": "U+F0232",
            "f": "U+F0233",
            "v": "U+F0234",
            "l": "U+F0235",
            "x": "U+F0236",
            "w": "U+F0239",
            "q": "U+F023A",
            "y": "U+F023B"
        };

        // 预处理：把 mapping 转成 key 列表（按长度降序保证双字符优先）
        const keys = Object.keys(mapping).sort((a, b) => b.length - a.length);

        // 把 U+xxxx 转成整数 codepoint
        function parseCodePoint(s) {
            if (!s) return null;
            const m = s.match(/U\+([0-9A-Fa-f]+)/);
            if (!m) return null;
            return parseInt(m[1], 16);
        }

        // 转换函数：按规则从左到右匹配，双字符优先（通过 keys 已经保证）
        function convertText(input) {
            let out = '';
            for (let i = 0; i < input.length;) {
                let matched = false;
                for (const k of keys) {
                    if (input.startsWith(k, i)) {
                        const cp = parseCodePoint(mapping[k]);
                        if (cp != null) {
                            if (escape) {
                                out += `\\u{${cp.toString(16).toUpperCase()}}`;
                            } else {
                                out += String.fromCodePoint(cp);
                            }
                        }
                        i += k.length;
                        matched = true;
                        break; // 找到最高优先级的匹配后跳出
                    }
                }
                if (!matched) {
                    out += input[i];
                    i++;
                }
            }
            return out;
        }

        // DOM
        const $input = document.getElementById('inputText');
        const $output = document.getElementById('outputText');
        const $copy = document.getElementById('copyBtn');

        function doConvert() {
            const res = convertText($input.value);
            $output.value = res;
        }

        $input.addEventListener('input', doConvert);

        $copy.addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText($output.value);
                alert('已复制到剪贴板');
            } catch (e) {
                // 回退
                $output.select();
                document.execCommand('copy');
                alert('已复制到剪贴板（回退方法）');
            }
        });
    </script>
</body>

</html>